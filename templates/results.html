{% extends "layout.html" %}
{% block title %}Results{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="static/results-styles.css">
<body>
    <h1>Results</h1>

    <div id="outfits-info" class="outfit-pic"></div>
    <div id="forecast-info" class="forecast-items"></div>

    <!-- Display the images -->
    <div id="image-gallery"></div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const city = sessionStorage.getItem('city');
        const gender = sessionStorage.getItem('gender');

        const data = {
            "city": city,
            "gender": gender
        };

        $.ajax({
            url: "/x",
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(data),
            success: function(response) {
                // Extract forecast and outfit data from the response
                const forecastData = response.forecast;
                const outfitData = response.outfits;
                const shopping=response.shopping;
                console.log(response)

                // Display forecast information
                const forecastInfoDiv = $("#forecast-info");
                forecastInfoDiv.empty(); // Clear any previous content

                let dayNum = 1
                forecastData.forEach(day => {
                    const temperature = day[0];
                    const weatherDescription = day[1];
                    const precipitation = day[2];
                    
                    const forecastItem = `<p><b>The forecast for Day ${dayNum} of next week</b> <br>Temperature: ${temperature}Â°F<br> Weather: ${weatherDescription}<br> Precipitation: ${precipitation}</p>`;
                    forecastInfoDiv.append(forecastItem);
                    dayNum ++;
                });

                // Display outfit information
                const outfitInfoDiv = $("#outfits-info");
                outfitInfoDiv.empty(); // Clear any previous content

                outfitData.forEach(outfitURL => {
                    const outfitItem = `<img src="${outfitURL}" alt="Outfit Image" />`;
                    outfitInfoDiv.append(outfitItem);
                });
            },
            error: function(error) {
                console.error('Error fetching data:', error);
            }
        });
    </script>


</body>
{% endblock %}
